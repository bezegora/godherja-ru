spawn_adabyss_starting_troops_effect = {
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops_start
		men_at_arms = {
			type = golden_spears
			stacks = 14
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 10
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 5
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 5
		}		
		men_at_arms = {
			type = airships
			stacks = 3
		}
		men_at_arms = {
			type = mangonel
			stacks = 5
		}
		location = capital_province
	}
}


# Make sure the Empire has troops...
spawn_adabyss_troops_effect = {
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		men_at_arms = {
			type = golden_spears
			stacks = 14
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 10
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 5
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 5
		}		
		men_at_arms = {
			type = airships
			stacks = 3
		}
		men_at_arms = {
			type = mangonel
			stacks = 5
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 10
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 10
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 3
		}
		men_at_arms = {
			type = airships
			stacks = 3
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = yes
		name = adabyss_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 10
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 10
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 3
		}
		men_at_arms = {
			type = airships
			stacks = 2
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = yes
		name = adabyss_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 10
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 10
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 3
		}
		men_at_arms = {
			type = airships
			stacks = 2
		}
		location = capital_province
	}
}

start_wars_for_damota_effect = {
	save_temporary_scope_as = adabyss_conqueror
	# Build a list of potential targets
	every_neighboring_top_liege_realm_owner = {
		limit = {
			any_sub_realm_county = {
				title_province = { geographical_region = world_es_adabyss }
			}
		}
		if = {
			limit = { NOT = { is_in_list = top_liege_targets } }
			add_to_temporary_list = top_liege_targets
		}
	}
	every_in_list = {
		list = top_liege_targets
		save_temporary_scope_as = new_war_target
		primary_title.empire = { save_temporary_scope_as = war_target_title }
		# Declare the war
		scope:adabyss_conqueror = {
			start_war = {
				cb = adabyss_realm_invasion_war
				target = scope:new_war_target.top_liege
				target_title = scope:war_target_title.empire
			}
		}
	}
}

adabyss_ai_effect = {	
	character:adabyss_1 = {
		if = {
			limit = { 
				is_alive = yes
				is_ai = yes
				NOR = { 
					is_at_war = yes 
					has_variable = ai_adabyss_recently_launched_invasion
				}
				has_title = title:e_adabyss
			}
			
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_wezrer }	
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_mirefaratag }
			
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_felayayla }
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_lihyacca }
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_jamayya }
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_khenemhat }
			
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_ashkesk }
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_aglabolu }
			adabyss_conquer_kingdom = { KINGDOM_NAME = k_moranesh }
			
			adabyss_conquer_empire = { EMPIRE_NAME = e_farhadd }
			adabyss_conquer_empire = { EMPIRE_NAME = e_uhtash }
			adabyss_conquer_empire = { EMPIRE_NAME = e_usfeh }
			adabyss_conquer_empire = { EMPIRE_NAME = e_kharadamat }
			adabyss_conquer_empire = { EMPIRE_NAME = e_halabaldayya }
		}
	}
}

adabyss_conquer_kingdom = {
	if = {
		limit = { 
			NOT = { has_variable = ai_adabyss_recently_launched_invasion } 
		}
		title:$KINGDOM_NAME$ = {
			if = {
				limit = {
					any_in_de_jure_hierarchy = {
						tier = tier_county 
						NOR = { 
							holder.top_liege = character:adabyss_1
						}
					}
				}
				random_in_de_jure_hierarchy = {
					limit = { 
						tier = tier_county 
						NOR = { 
							holder.top_liege = character:adabyss_1
						}
					}
					kingdom = { save_scope_as = defender_title }
					holder.top_liege = { save_scope_as = defender }
					character:adabyss_1 = {

						set_variable = {
							name = ai_adabyss_recently_launched_invasion
							days = 10
						}
						start_war = {
							cb = adabyss_realm_invasion_war
							target = scope:defender
							target_title = scope:defender_title
						}
					}
				}
			}
		}
	}
}

adabyss_conquer_empire = {
	if = {
		limit = { 
			NOT = { has_variable = ai_adabyss_recently_launched_invasion } 
		}
		title:$EMPIRE_NAME$ = {
			if = {
				limit = {
					any_in_de_jure_hierarchy = {
						tier = tier_county 
						NOR = { 
							holder.top_liege = character:adabyss_1
						}
					}
				}
				random_in_de_jure_hierarchy = {
					limit = { 
						tier = tier_county 
						NOR = { 
							holder.top_liege = character:adabyss_1
						}
					}
					empire = { save_scope_as = defender_title }
					holder.top_liege = { save_scope_as = defender }
					character:adabyss_1 = {

						set_variable = {
							name = ai_adabyss_recently_launched_invasion
							days = 10
						}
						start_war = {
							cb = adabyss_realm_invasion_war
							target = scope:defender
							target_title = scope:defender_title
						}
					}
				}
			}
		}
	}
}


