spawn_kabayo_konsa_character_effect = {

	title:c_wishak.title_province = {
		save_scope_as = adabyss_invasion_foothold
	}

	create_character = {
		name = "Kabayo-Konsa" # AKA: Genghis Khan
		gender = male
		location = scope:adabyss_invasion_foothold
		template = kabayo_konsa_character_template
		save_scope_as = kabayo_konsa
	}
	scope:kabayo_konsa = {
		# Make temporarily immune to disease
		add_character_flag = {
			flag = immune_to_disease
			years = 40
		}

		give_kabayo_konsa_land_effect = yes
		add_gold = 500
		add_prestige = 1000
		add_piety = 500
	}
	

	scope:kabayo_konsa = {
		trigger_event = adabyss_opening.2
		trigger_event = adabyss_opening.9001
	}
}

give_kabayo_konsa_land_effect = {
	save_scope_as = adabyss_leader

	create_title_and_vassal_change = {
		type = conquest
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:c_wishak = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	title:e_limpegail = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
}	

spawn_adabyss_starting_troops_effect = {
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops_start
		levies = {
			value = 3000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 10
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 8
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 5
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 5
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 5
		}		
		men_at_arms = {
			type = mangonel
			stacks = 10
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops_start
		levies = {
			value = 3000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 10
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 8
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 5
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 5
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 5
		}		
		men_at_arms = {
			type = mangonel
			stacks = 10
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops_start
		levies = {
			value = 3000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 10
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 8
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 8
		}
		men_at_arms = {
			type = camel_rider
			stacks = 5
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 5
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 5
		}		
		men_at_arms = {
			type = mangonel
			stacks = 10
		}
		location = capital_province
	}
}


# Make sure the Empire has troops...
spawn_adabyss_troops_effect = {
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 10
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 10
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 10
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 10
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 10
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 10
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 10
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 10
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 10
		}
		men_at_arms = {
			type = camel_rider
			stacks = 10
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 10
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 10
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 10
		}
		location = capital_province
	}
}

start_wars_for_damota_effect = {
	save_temporary_scope_as = adabyss_conqueror
	# Build a list of potential targets
	every_neighboring_top_liege_realm_owner = {
		limit = {
			any_sub_realm_county = {
				title_province = { geographical_region = world_es_damota }
			}
		}
		if = {
			limit = { NOT = { is_in_list = top_liege_targets } }
			add_to_temporary_list = top_liege_targets
		}
	}
	every_in_list = {
		list = top_liege_targets
		save_temporary_scope_as = new_war_target
		primary_title.empire = { save_temporary_scope_as = war_target_title }
		# Declare the war
		scope:adabyss_conqueror = {
			start_war = {
				cb = adabyss_realm_invasion_war
				target = scope:new_war_target.top_liege
				target_title = scope:war_target_title.empire
			}
		}
	}
}

adabyss_ai_effect = {
	if = {
		limit = {
			exists = global_var:adabyss_invader
		}
		if = {
			limit = { global_var:adabyss_invader = { is_alive = yes } }
			global_var:adabyss_invader = {
				save_scope_as = gets_adabyss_ai
			}
			scope:gets_adabyss_ai = {
				if = {
					limit = { 
						is_ai = yes
						NOT = { 
							is_at_war = yes 
						}
						has_title = title:e_limpegail
					}
					
					#DAMOTA
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_megedi }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_mezawe }			
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_wezrer }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_kawolaz }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_dihalet }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_mirefaratag }
					
					#INTO HARTHAH
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_felayayla }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_jamayya }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_khenemhat }
					#EAST AND WEST
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_mohrtag_al_badi }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_gahzi }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_tifrennesh }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_ashkesk }
					adabyss_conquer_kingdom = { KINGDOM_NAME = k_aglabolu }
					
					#FURTHER BEYOND
					adabyss_conquer_empire = { EMPIRE_NAME = e_farhadd }
					adabyss_conquer_empire = { EMPIRE_NAME = e_uhtash }
					adabyss_conquer_empire = { EMPIRE_NAME = e_kharadamat }
					adabyss_conquer_empire = { EMPIRE_NAME = e_sihnamiyah }
				}
			}
		}
		else = { remove_global_variable = adabyss_invader }
	}
}

adabyss_conquer_kingdom = {
	if = {
		limit = { 
			NOT = { has_variable = ai_adabyss_recently_launched_invasion } 
		}
		title:$KINGDOM_NAME$ = {
			if = {
				limit = {
					any_in_de_jure_hierarchy = {
						tier = tier_county 
						NOR = { 
							holder.top_liege = scope:gets_adabyss_ai
						}
					}
				}
				random_in_de_jure_hierarchy = {
					limit = { 
						tier = tier_county 
						NOR = { 
							holder.top_liege = scope:gets_adabyss_ai
						}
					}
					kingdom = { save_scope_as = defender_title }
					holder.top_liege = { save_scope_as = defender }
					scope:gets_adabyss_ai = {

						set_variable = {
							name = ai_adabyss_recently_launched_invasion
							days = 10
						}
						start_war = {
							cb = adabyss_realm_invasion_war
							target = scope:defender
							target_title = scope:defender_title
						}
					}
				}
			}
		}
	}
}

adabyss_conquer_empire = {
	if = {
		limit = { 
			NOT = { has_variable = ai_adabyss_recently_launched_invasion } 
		}
		title:$EMPIRE_NAME$ = {
			if = {
				limit = {
					any_in_de_jure_hierarchy = {
						tier = tier_county 
						NOR = { 
							holder.top_liege = scope:gets_adabyss_ai
						}
					}
				}
				random_in_de_jure_hierarchy = {
					limit = { 
						tier = tier_county 
						NOR = { 
							holder.top_liege = scope:gets_adabyss_ai
						}
					}
					empire = { save_scope_as = defender_title }
					holder.top_liege = { save_scope_as = defender }
					scope:gets_adabyss_ai = {

						set_variable = {
							name = ai_adabyss_recently_launched_invasion
							days = 10
						}
						start_war = {
							cb = adabyss_realm_invasion_war
							target = scope:defender
							target_title = scope:defender_title
						}
					}
				}
			}
		}
	}
}

spawn_borderfort_troops_effect = {
spawn_army = {
		uses_supply = no
		inheritable = yes
		name = adabyss_event_troops
		men_at_arms = {
			type = golden_spears
			stacks = 40
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 20
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 30
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 20
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 20
		}		
		location = capital_province
	}
}

spawn_adabyss_reclaimer_character_effect = {

	title:c_adabyssfort.holder.top_liege = {
		save_scope_as = fort_taker
	}

	title:c_adabyssfort.title_province = {
		save_scope_as = adabyss_borderfort
	}

	create_character = {
		name = "Banerisa" # AKA: Genghis Khan
		gender = male
		location = scope:adabyss_borderfort
		template = banerisa_character_template
		save_scope_as = banerisa
	}
	scope:banerisa = {
		# Make temporarily immune to disease
		add_character_flag = {
			flag = immune_to_disease
			years = 40
		}

		give_banerisa_land_effect = yes
		add_gold = 2000
		add_prestige = 5000
		add_piety = 2000
	}
	

	scope:banerisa = {
		trigger_event = 
			adabyss_event.0009
	}
}

give_banerisa_land_effect = {
	save_scope_as = adabyss_leader

	create_title_and_vassal_change = {
		type = conquest
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:c_adabyssfort = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	title:k_adabyss_borderfort = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
}

adabyss_reclamation_army_effect = { #spawns a fuckoff Adabyssian army to stomp in the face of whomever dared touch Adabyssian soil
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 10000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 15
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 15
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 15
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 15
		}
		location = capital_province
	}
spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 10000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 15
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 15
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 15
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 15
		}
		location = capital_province
	}
spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 10000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 15
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 15
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 15
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 15
		}
		location = capital_province
	}
spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 10000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 15
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 15
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 15
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 15
		}
		location = capital_province
	}
spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 10000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 15
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 15
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 15
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 15
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = adabyss_event_troops
		levies = {
			value = 10000
		}
		men_at_arms = {
			type = golden_spears
			stacks = 20
		}
		men_at_arms = {
			type = golem_infantry
			stacks = 15
		}
		men_at_arms = {
			type = autocrossbowmen
			stacks = 15
		}
		men_at_arms = {
			type = arcane_auxiliaries
			stacks = 15
		}
		men_at_arms = {
			type = armored_horsemen
			stacks = 15
		}		
		men_at_arms = {
			type = airships
			stacks = 5
		}
		men_at_arms = {
			type = mangonel
			stacks = 15
		}
		location = capital_province
	}
}

spawn_damned_leader_effect = {

	title:c_adabyssfort.holder.top_liege = {
		save_scope_as = fort_taker_heir
	}

	title:c_adabyssfort.title_province = {
		save_scope_as = adabyss_borderfort
	}

	create_character = {
		name = "Anerali" # AKA: Genghis Khan
		gender = male
		location = scope:adabyss_borderfort
		template = anerali_character_template
		save_scope_as = anerali
	}
	scope:anerali = {
		# Make temporarily immune to disease
		add_character_flag = {
			flag = immune_to_disease
			years = 40
		}

		give_damned_land_effect = yes
		add_gold = 2000
		add_prestige = 100
		add_piety = 2000
	}
	

	scope:anerali = {
		trigger_event = adabyss_event.0012
	}
	scope:fort_taker_heir = {
		trigger_event = adabyss_event.0015
	}
}

give_damned_land_effect = {
	save_scope_as = adabyss_leader

	create_title_and_vassal_change = {
		type = conquest
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:c_adabyssfort = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	title:e_adabyssian_damned = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
}

spawn_warlord_leader_effect = {

	title:c_adabyssfort.holder.top_liege = {
		save_scope_as = fort_taker_heir
	}

	title:c_adabyssfort.title_province = {
		save_scope_as = adabyss_borderfort
	}

	create_character = {
		name = "Anerali" # AKA: Genghis Khan
		gender = male
		location = scope:adabyss_borderfort
		template = anerali_character_template
		save_scope_as = anerali
	}
	scope:anerali = {
		# Make temporarily immune to disease
		add_character_flag = {
			flag = immune_to_disease
			years = 40
		}

		give_warlord_land_effect = yes
		add_gold = 2000
		add_prestige = 100
		add_piety = 2000
	}
	

	scope:anerali = {
		trigger_event = adabyss_event.0017
	}
	scope:fort_taker_heir = {
		trigger_event = adabyss_event.0016
	}
}

give_warlord_land_effect = {
	save_scope_as = adabyss_leader

	create_title_and_vassal_change = {
		type = conquest
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:c_adabyssfort = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	title:e_adabyssian_warlord = {
		change_title_holder = {
			holder = scope:adabyss_leader
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
}