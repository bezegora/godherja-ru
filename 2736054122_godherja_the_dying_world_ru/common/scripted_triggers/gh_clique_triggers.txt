##############################
# INDIVIDUAL CLIQUE TRIGGERS #
##############################

general_clique_entry_trigger = {
	clique_entry_trigger = { NAME = magi_clique }
	clique_entry_trigger = { NAME = warrior_clique }
	clique_entry_trigger = { NAME = aristocrat_clique }
	
	clique_entry_trigger = { NAME = adoxos }
	clique_entry_trigger = { NAME = adoxos_pure }
	clique_entry_trigger = { NAME = mazanai }
	clique_entry_trigger = { NAME = mazanai_pure }
	clique_entry_trigger = { NAME = kairouika }
	clique_entry_trigger = { NAME = kairouika_pure }
	
	clique_entry_trigger = { NAME = metakas }
	clique_entry_trigger = { NAME = metakas_pure }
	clique_entry_trigger = { NAME = epichorima }
	clique_entry_trigger = { NAME = epichorima_pure }
	clique_entry_trigger = { NAME = apodromios }
	
	clique_entry_trigger = { NAME = xeneftoi }
	clique_entry_trigger = { NAME = xeneftoi_pure }
	clique_entry_trigger = { NAME = syngamar }
	clique_entry_trigger = { NAME = syngamar_pure }
	clique_entry_trigger = { NAME = adelron }
	clique_entry_trigger = { NAME = adelron_pure }
	clique_entry_trigger = { NAME = diomatias }
	clique_entry_trigger = { NAME = diomatias_pure }
		
	clique_entry_trigger = { NAME = masters }
	clique_entry_trigger = { NAME = masters_pure }
	clique_entry_trigger = { NAME = securers }
	clique_entry_trigger = { NAME = securers_pure }
	clique_entry_trigger = { NAME = benedictioners }
	clique_entry_trigger = { NAME = benedictioners_pure }
	clique_entry_trigger = { NAME = patrons }
	clique_entry_trigger = { NAME = patrons_pure }
		
	clique_entry_trigger = { NAME = suntrofoi }
	clique_entry_trigger = { NAME = thousandspears }
	clique_entry_trigger = { NAME = gaithos }
	
	clique_entry_trigger = { NAME = kleptiakos }
	clique_entry_trigger = { NAME = kleptiakos_pure }
	clique_entry_trigger = { NAME = polykalton }
	clique_entry_trigger = { NAME = polykalton_pure }
	clique_entry_trigger = { NAME = dorogeros }
	clique_entry_trigger = { NAME = dorogeros_pure }
	
	clique_entry_trigger = { NAME = archaeopokasi }
	clique_entry_trigger = { NAME = neapokasi }
	clique_entry_trigger = { NAME = raadilist }
	clique_entry_trigger = { NAME = unitarish }
	clique_entry_trigger = { NAME = gisredde_aristocracy }
	clique_entry_trigger = { NAME = gisredde_theocrats }
	clique_entry_trigger = { NAME = watcher_interpreters }
	clique_entry_trigger = { NAME = watcher_interpreters_pure }
	clique_entry_trigger = { NAME = watcher_swords }
	clique_entry_trigger = { NAME = watcher_swords_pure }
	clique_entry_trigger = { NAME = watcher_defenders }
	
	clique_entry_trigger = { NAME = followers_of_the_eye }
}

magi_clique_entry_trigger = {
	OR = {
		has_trait = education_living_magic
		has_trait = education_dead_magic
		has_trait = education_mixed_magic
	}
}

warrior_clique_entry_trigger = {
	always = yes
}

commoner_clique_entry_trigger = {
	always = yes
}

aristocrat_clique_entry_trigger = {
	is_lowborn = no
}

merchant_clique_entry_trigger = {
	always = yes
}

theocrat_clique_entry_trigger = {
	always = yes
}

adoxos_entry_trigger = {
	has_faith = faith:sansia
	culture_group = culture_group:gh_imperial_group
}

adoxos_pure_entry_trigger = {
	has_faith = faith:sansia
}

mazanai_entry_trigger = {
	has_faith = faith:sansia
	has_trait = education_living_magic
	culture_group = culture_group:gh_imperial_group
}

mazanai_pure_entry_trigger = {
	has_faith = faith:sansia
	has_trait = education_living_magic
}

kairouika_entry_trigger = {
	has_faith = faith:sansia
}

kairouika_pure_entry_trigger = {
	has_faith = faith:sansia
}

metakas_entry_trigger = {
	has_faith = faith:katharitos
	culture_group = culture_group:gh_imperial_group
}

metakas_pure_entry_trigger = {
	culture_group = culture_group:gh_imperial_group
}

epichorima_entry_trigger = {
	has_faith = faith:katharitos
	culture_group = culture_group:gh_imperial_group
}

epichorima_pure_entry_trigger = {
	has_faith = faith:katharitos
	culture_group = culture_group:gh_imperial_group
}

apodromios_entry_trigger = {
	has_faith = faith:katharitos
}

kleptiakos_entry_trigger = {
	has_faith = faith:philanthrios
	culture_group = culture_group:gh_imperial_group
}

kleptiakos_pure_entry_trigger = {
	has_faith = faith:philanthrios
}

polykalton_entry_trigger = {
	has_faith = faith:philanthrios
	culture_group = culture_group:gh_imperial_group
}

polykalton_pure_entry_trigger = {
	has_faith = faith:philanthrios
}

dorogeros_entry_trigger = {
	has_faith = faith:philanthrios
}

dorogeros_pure_entry_trigger = {
	has_faith = faith:philanthrios
}

forgotten_but_seen_entry_trigger = {
	has_faith = faith:forgotten
	culture_group = culture_group:gh_imperial_group
}

xeneftoi_entry_trigger = {
	has_faith = faith:thysia
}

xeneftoi_pure_entry_trigger = {
	has_faith = faith:thysia
}

syngamar_entry_trigger = {
	has_faith = faith:thysia
	culture_group = culture_group:gh_imperial_group
}

syngamar_pure_entry_trigger = {
	has_faith = faith:thysia
}


adelron_entry_trigger = {
	has_faith = faith:thysia
	has_trait = education_dead_magic
	culture_group = culture_group:gh_imperial_group
}

adelron_pure_entry_trigger = {
	has_faith = faith:thysia
	has_trait = education_dead_magic
}

diomatias_entry_trigger = {
	has_faith = faith:thysia
	has_trait = education_living_magic
	culture_group = culture_group:gh_imperial_group
}

diomatias_pure_entry_trigger = {
	has_faith = faith:thysia
	has_trait = education_living_magic
}

masters_entry_trigger = {
	has_faith = faith:calysto
}

masters_pure_entry_trigger = {
	has_faith = faith:calysto
}

securers_entry_trigger = {
	has_faith = faith:calysto
}

securers_pure_entry_trigger = {
	has_faith = faith:calysto
}

benedictioners_entry_trigger = {
	has_faith = faith:calysto
}

benedictioners_pure_entry_trigger = {
	has_faith = faith:calysto
}

patrons_entry_trigger = {
	has_faith = faith:calysto
}

patrons_pure_entry_trigger = {
	has_faith = faith:calysto
}

suntrofoi_entry_trigger = {
	has_faith = faith:eos
	culture_group = culture_group:gh_imperial_group
}

thousandspears_entry_trigger = {
	has_faith = faith:eos
	culture_group = culture_group:gh_imperial_group
}

gaithos_entry_trigger = {
	has_faith = faith:eos
	culture_group = culture_group:gh_imperial_group
}

archaeopokasi_entry_trigger = {
	is_lowborn = no
	culture_group = culture_group:gh_imperial_group
}

neapokasi_entry_trigger = {
	always = yes
	culture_group = culture_group:gh_imperial_group
}

gisredde_aristocracy_entry_trigger = {
	is_lowborn = no
}

gisredde_artisans_entry_trigger = {
	always = yes
}

gisredde_banks_entry_trigger = {
	always = yes
}

gisredde_cartels_entry_trigger = {
	always = yes
}

gisredde_companies_entry_trigger = {
	always = yes
}

gisredde_theocrats_entry_trigger = {
	has_faith = faith:lifepath
}

raadilist_entry_trigger = {
	is_lowborn = no
	has_culture = culture:konijkmener
}

unitarish_entry_trigger = {
	has_culture = culture:konijkmener
}

neutrals_entry_trigger = {
	always = yes
}

watcher_interpreters_entry_trigger = {
	has_faith = faith:dikaynos
	culture_group = culture_group:gh_imperial_group
}

watcher_interpreters_pure_entry_trigger = {
	has_faith = faith:dikaynos
}

watcher_swords_entry_trigger = {
	has_faith = faith:dikaynos
	culture_group = culture_group:gh_imperial_group
}

watcher_swords_pure_entry_trigger = {
	has_faith = faith:dikaynos
}


watcher_defenders_entry_trigger = {
	has_faith = faith:dikaynos
}

followers_of_the_eye_entry_trigger = {
	always = yes
}

###############################
# CLIQUE INTERACTION TRIGGERS #
###############################

general_clique_interaction_trigger = {
	clique_interaction_trigger = { NAME = recruit_kleptiakos_enforcer }
	clique_interaction_trigger = { NAME = urgent_fundraising }
	clique_interaction_trigger = { NAME = defenders_lighten_sentences }
	clique_interaction_trigger = { NAME = defenders_magistrates }
}

recruit_kleptiakos_enforcer_interaction_trigger = {
	trigger_if = {
		limit = { has_faith = faith:philanthrios }
		prestige >= kleptiakos_enforcer_recruitment_cost_prestige
	}
	trigger_else = {
		gold >= kleptiakos_enforcer_recruitment_cost_gold
	}
}

urgent_fundraising_interaction_trigger = {
	prestige >= kleptiakos_enforcer_recruitment_cost_prestige
}

recruit_swordsister_interaction_trigger = {
	prestige >= 1
}

recruit_living_magi_sansianite_interaction_trigger = {
	prestige >= 1
}

sacrifice_prisoners_sansianite_interaction_trigger = {
	prestige >= 5000
}

merchant_placeholder_clique_interaction_trigger = {
	#clique_interaction_trigger = { NAME = merchant_placeholder }
}

interpreters_legal_support_clique_interaction_trigger = {
	piety >= 1500
}

interpreters_investigation_clique_interaction_trigger = {
	prestige >= 2500
}

swords_killings_clique_interaction_trigger = {
	piety >= 1500
}

swords_army_clique_interaction_trigger = {
	gold >= 350
}

defenders_magistrates_interaction_trigger = {
	piety >= 100
	NOT = {
		has_character_flag = work_with_locals
	}
}

defenders_lighten_sentences_interaction_trigger = {
	prestige >= 100
	NOR = {
		has_character_modifier = lighten_sentences_modifier_1
		has_character_modifier = lighten_sentences_modifier_2
		has_character_modifier = lighten_sentences_modifier_3
	}
}

##################################
# CLIQUE ACCESS TRIGGERS BACKEND #
##################################

can_access_cliques_trigger = {
	trigger_if = {
		limit = { is_independent_ruler = no }
		highest_held_title_tier >= tier_county
		OR = {
			any_held_title = {
				has_variable = clique_number
			}
			trigger_if = {
				limit = { exists = liege }
				any_liege_or_above = {
					OR = {
						primary_title = { has_variable = clique_number }
						any_held_title = {
							has_variable = clique_number
							any_in_de_jure_hierarchy = {
								this = root.primary_title
							}
						}
					}
				}
			}
		}
	}
	trigger_else = {
		primary_title = { has_variable = clique_number }
	}
}

can_access_cliques_general_trigger = {
	trigger_if = {
		limit = { is_independent_ruler = no }
		any_liege_or_above = {
			OR = {
				primary_title = { has_variable = clique_number }
				any_held_title = {
					has_variable = clique_number
					any_in_de_jure_hierarchy = {
						this = root.primary_title
					}
				}
			}
		}
	}
	trigger_else = {
		primary_title = { has_variable = clique_number }
	}
}

clique_entry_trigger = {
	trigger_if = {
		limit = {
			trigger_if = {
				limit = { scope:clique_province = { has_variable = clique_name } }
				scope:clique_province.var:clique_name = flag:$NAME$
			}
			trigger_else = { always = no }
		}
		$NAME$_entry_trigger = yes
	}
}

clique_interaction_trigger = {
	trigger_if = {
		limit = {
			trigger_if = {
				limit = { scope:clique_interaction_province = { has_variable = clique_interaction_name } }
				scope:clique_interaction_province.var:clique_interaction_name = flag:$NAME$
			}
			trigger_else = { always = no }
		}
		$NAME$_interaction_trigger = yes
	}
}

has_clique_government_trigger = {
	OR = {
		has_government = landed_order_government
		has_government = republic_playable_government
		has_government = military_unit_government
		has_government = theocracy_government
		has_government = magocratic_republic
	}
}

has_clique_election_government_trigger = {
	OR = {
		has_government = landed_order_government
		has_government = republic_playable_government
		has_government = military_unit_government
		has_government = theocracy_government
		has_government = magocratic_republic
	}
}

should_have_republic_clique_law_trigger = {
		has_government = republic_playable_government
		highest_held_title_tier >= tier_county
		OR = {
			is_independent_ruler = yes
			NOT = { has_same_government = liege }
		}
}

can_title_have_clique_law_trigger = {
	tier >= tier_county
	is_temporal_head_of_faith_trigger = no
}

###################
# ASPECT TRIGGERS #
###################

clique_has_aspect = {
	$CLIQUE$ = {
		any_in_list = {
			variable = clique_guiding_principle_aspects
			this = flag:$ASPECT$
		}
	}
}

##########################
# PRESUMED HEIR TRIGGERS #
##########################

can_be_presumed_heir_for_title = {
	# Checks if a character is a valid potential presumed heir to a title
	trigger_if = {
		limit = { $TITLE$ = { is_title_created = yes } }
		is_vassal_or_below_of = $TITLE$.holder
	}
	trigger_else = { always = no }
}

is_presumed_heir_of_any_character_title = {
	$TARGET_CHARACTER$ = {
		any_held_title = {
			trigger_if = {
				limit = { has_variable = presumed_heir }
				var:presumed_heir = $PRESUMED_HEIR$
			}
			trigger_else = { always = no }
		}
	}
}

###############################
# CLIQUE TRAIT/SKILL TRIGGERS #
###############################

clique_has_trait_trigger = {
	has_variable_list = clique_guiding_principle_traits
	is_target_in_variable_list = { 
		name = clique_guiding_principle_traits
		target = flag:$TRAIT$
	}
}

has_clique_trait_trigger = {
	has_trait = $TRAIT$
	var:character_clique = { clique_has_trait_trigger = { TRAIT = $TRAIT$ } }
}

clique_has_opposed_trait_trigger = {
	has_variable_list = clique_guiding_principle_opposed_traits
	is_target_in_variable_list = { 
		name = clique_guiding_principle_opposed_traits
		target = flag:$TRAIT$
	}
}

has_opposed_clique_trait_trigger = {
	has_trait = $TRAIT$
	var:character_clique = { clique_has_opposed_trait_trigger = { TRAIT = $TRAIT$ } }
}

clique_has_skill_trigger = {
	has_variable_list = clique_guiding_principle_skills
	is_target_in_variable_list = { 
		name = clique_guiding_principle_skills
		target = flag:$SKILL$
	}
}

clique_has_aspect_trigger = {
	has_variable_list = clique_guiding_principle_aspects
	is_target_in_variable_list = { 
		name = clique_guiding_principle_aspects
		target = flag:$ASPECT$
	}
}

#########################
# MISC. CLIQUE TRIGGERS #
#########################

is_same_clique_as_trigger = {
	trigger_if = {
		limit = {
			is_alive = yes
			has_variable = character_clique 
		}
		var:character_clique = {
			save_temporary_scope_as = previous_character_clique
			trigger_if = {
				limit = { 
					$OTHER_CHARACTER$ = {
						is_alive = yes
						has_variable = character_clique 
					} 
				}
				$OTHER_CHARACTER$ = {
					var:character_clique = { this = scope:previous_character_clique }
				}
			}
			trigger_else = { always = no }
		}
	}
	trigger_else = { always = no }
}

is_member_of_clique_trigger = {
	trigger_if = {
		limit = { has_variable = character_clique }
		var:character_clique = {
			this = $CLIQUE$
		}
	}
	trigger_else = { always = no }
}

is_member_of_clique_with_flag_trigger = {
	trigger_if = {
		limit = { has_variable = character_clique }
		var:character_clique = {
			var:clique_name = { this = flag:$FLAG$ }
		}
	}
	trigger_else = { always = no }
}

should_have_liege_clique_appointment_succession = {
	is_landed = yes
	OR = {
		has_government = landed_order_government
		has_government = military_unit_government
		has_government = theocracy_government
	}
	is_independent_ruler = no
	has_same_government = liege
}

should_have_own_cliques_trigger = {
	has_clique_government_trigger = yes
	highest_held_title_tier > tier_barony
	OR = {
		is_independent_ruler = yes
		liege = { has_clique_government_trigger = no }
		NOT = { has_same_government = liege }
		AND = {
			liege = { 
				OR = {
					has_government = landed_order_government 
					has_government = theocracy_government
				}
			}
			has_same_government = liege
			NOT = { faith = liege.faith }
		}
	}
}