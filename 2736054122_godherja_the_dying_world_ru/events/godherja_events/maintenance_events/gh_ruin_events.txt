namespace = ruin

ruin.0001 = {	# Checks every single known empty county to make sure it's independent and ruled by a ruin
	type = empty
    hidden = yes
	
	immediate = {
		every_ruler = {
			limit = {
				OR = {
					has_faith = faith:wasteland_faith
					has_culture = culture:wasteland
				}
			}
			if = {
				limit = { NOT = { has_trait = gh_wasteland } }
				set_culture = culture:fog_eaters
				set_character_faith = faith:fogeater
			}
			else = {
				if = {
					limit = { exists = liege }
					if = {
						limit = { liege = { NOT = { has_trait = gh_wasteland } } }
						create_title_and_vassal_change = {
							type = independency
							save_scope_as = change
							add_claim_on_loss = yes
						}
						becomes_independent = {
							change = scope:change
						}
						resolve_title_and_vassal_change = scope:change
					}
				}
			}
		}
	}
}