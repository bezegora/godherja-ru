#Tags:
#rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.

headgear = {
	#interface_position = 1
	usage = game
	selection_behavior = weighted_random

	no_portrait = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_trait = gh_wasteland
			}
		}
	}

	no_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		
		weight = {
			##No headgear for children under 16 ##
			base = 0
			modifier = {
				add = 100
				age < 16
			}
			#No headgear for characters with an active Vow of Poverty
			modifier = {
				add = 100
				has_character_modifier = vow_of_poverty_modifier
				#Should still wear armor when going to war
				NOT = { portrait_wear_armor_trigger = yes }
			}
			modifier = {
				add = 1000
				AND = {
					#Deliberately not the 'fully naked' one since dropping your crown's intended even if nudity is disabled
					should_be_naked_trigger = yes
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_adult = no
					highest_held_title_tier >= tier_duchy #Should wear ducal or royal crown instead.
					AND = {
						religion = religion:marcher_religion
						faith.religious_head = this
					}
				}
			}
			#Refuses to wear a crown due to HighGod.
			modifier = {
				add = 110
				has_character_modifier = fp1_abased_before_highgod_modifier
			}
		}
	}

	vanity_no_headgear = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		
		weight = {
			## No headgear for children under 16 ## 
			base = 0
			modifier = {
				add = 100
				age < 16
			}
			# No headgear for characters with an active Vow of Poverty
			modifier = {
				add = 100
				has_character_modifier = vow_of_poverty_modifier
				# Should still wear armor when going to war
				NOT = { portrait_wear_armor_trigger = yes }
			}
			# No headgear for vanity characters with the no_headgear flag, unless they are dukes or higher
            modifier = {
                add = 200
                has_character_flag = no_headgear
                highest_held_title_tier < tier_duchy
				this = character:northern_aversaria_frodbrokna_11
            }
		}
	}





## Western ##

	western_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_western_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_western_clothing_spouse_trigger = yes
			}
		}
	}

	western_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							#has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_western_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								#has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_western_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	western_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						OR = {
							portrait_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								OR = {
									portrait_fp1_norse_clothing_trigger = no
									AND = {
										portrait_fp1_norse_clothing_trigger = yes
										NOR = {
											has_government = tribal_government
											religion = religion:sjalvolki_religion
										}
									}
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							OR = {
								portrait_western_clothing_spouse_trigger = yes
								OR = {
									portrait_fp1_norse_clothing_spouse_trigger = no
									AND = {
										portrait_fp1_norse_clothing_spouse_trigger = yes
										NOR = {
											has_government = tribal_government
											religion = religion:sjalvolki_religion
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	western_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
							AND = {
								highest_held_title_tier = tier_empire
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						OR = {
							portrait_western_clothing_trigger = yes
							AND = {
								portrait_northern_clothing_trigger = yes
								portrait_fp1_norse_clothing_trigger = no
							}
							AND = {
								portrait_fp1_norse_clothing_trigger = yes
								NOR = {
									has_government = tribal_government
									religion = religion:sjalvolki_religion
								}
							}
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
								AND = {
									highest_held_title_tier = tier_empire
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							OR = {
								portrait_western_clothing_spouse_trigger = yes
								AND = {
									portrait_northern_clothing_spouse_trigger = yes
									portrait_fp1_norse_clothing_spouse_trigger = no
								}
								AND = {
									portrait_fp1_norse_clothing_spouse_trigger = yes
									NOR = {
										has_government = tribal_government
										religion = religion:sjalvolki_religion
									}
								}
							}
						}
					}
				}
			}
		}
	}

	western_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_western_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_western_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}


	western_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = western_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_western_clothing_trigger = yes
				
				NOR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	crusades_western_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = crusades_western_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				OR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	##Byzantine ##
	byzantine_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_byzantine_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_byzantine_clothing_spouse_trigger = yes
			}
		}
	}

	byzantine_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							#has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								#has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_byzantine_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	byzantine_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = byzantine_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_byzantine_clothing_trigger = yes
					}
					#AND = {
					#	exists = primary_spouse
					#	is_ruler = no
					#	primary_spouse = {
					#		OR = {
					#			highest_held_title_tier = tier_empire
					#			AND = { is_ruler = yes has_government = theocracy_government }
					#		}
					#		NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
					#		NOT = { has_government = republic_government }
					#		portrait_byzantine_clothing_trigger = yes
					#	}
					#}
				}

			}
		}
	}

	##INDIAN ##
	indian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_indian_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_spouse_trigger = yes
			}
		}
	}

	mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	indian_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							#has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								#has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_indian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	indian_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_indian_clothing_spouse_trigger = yes
						}
					}
				}				

			}
		}
	}

	indian_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = {
								is_ruler = yes
								has_government = theocracy_government
							}
						}
						NOT = {
							AND = {
								is_ruler = yes
								has_government = mercenary_government
							}
						}#Blocked for mercenaries
						NOT = {
							has_government = republic_government
						}
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { 
								AND = { 
									is_ruler = yes 
									has_government = mercenary_government  
								} 
							}#Blocked for mercenaries
							NOT = {
								has_government = republic_government
							}
							portrait_indian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	indian_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_indian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { 
									is_ruler = yes 
									has_government = theocracy_government
								}
							}
							NOT = {
								AND = {
									is_ruler = yes
									has_government = mercenary_government
								} 
							}#Blocked for mercenaries
							NOT = { 
								has_government = republic_government
							}
							portrait_indian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	indian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = indian_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_indian_clothing_trigger = yes
			}
		}
	}

	##MENA ##
	mena_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_mayors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 60
				highest_held_title_tier < tier_county
				has_government = republic_government
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_low_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							#has_dynasty = no
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								#has_dynasty = no
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_mena_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_mena_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_mena_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_mena_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	mena_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_mena_clothing_trigger = yes
			}
		}
	}

	mena_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_mena_clothing_trigger = yes
				
				NOR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}
	
	##DDE ABBASID ##
	dde_abbasid_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	has_government = republic_government
				 	AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_abbasid_clothing_spouse_trigger = yes
			}
		}
	}

	dde_abbasid_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_dde_abbasid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_dde_abbasid_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	dde_abbasid_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_dde_abbasid_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_dde_abbasid_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	dde_abbasid_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 # pick over mena
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_dde_abbasid_clothing_trigger = yes
			}
		}
	}

	dde_abbasid_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dde_abbasid_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 #slightly higher than mena
				OR = { #This helmet is really fancy & gilded - it's nothing for commoners. We allow Dukes+ to use it sometimes, just because it suits them!
					AND = {
						has_council_position = councillor_marshal
						OR = {
							is_landed = no
							primary_title.tier >= tier_duchy
						}
					}
					AND = {
						is_commanding_army = yes
						AND = {
							exists = primary_title
							primary_title.tier >= tier_duchy
						}
					}
				}
				portrait_mena_clothing_trigger = yes
				
				NOR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
					AND = {
						has_trait = peasant_leader
						OR = {
							is_ruler = no
							is_leading_faction_type = peasant_faction
							AND = {
								is_ruler = yes
								is_landed = no
								OR = {
									has_government = feudal_government
									has_government = clan_government
								}
							}
						}
					}
				}
			}
		}
	}

	##Steppe ##
	steppe_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_steppe_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_steppe_clothing_spouse_trigger = yes
			}
		}
	}

	steppe_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 1
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 1
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_steppe_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_steppe_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier > tier_duchy
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_steppe_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier > tier_duchy
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_steppe_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	steppe_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = steppe_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_steppe_clothing_trigger = yes
				
				NOR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	##Northern Pagans ##
	northern_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 70
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_northern_clothing_trigger = yes
			}
			modifier = {
				add = 30
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_northern_clothing_spouse_trigger = yes
			}
		}
	}

	northern_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					#has_dynasty = no
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_northern_clothing_trigger = yes
			}
		}
	}

	northern_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northern_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_northern_clothing_trigger = yes
				
				NOR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	##Sub-Saharan Africans ##
	african_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_african_clothing_trigger = yes
			}
			modifier = {
				add = 50
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_african_clothing_spouse_trigger = yes
			}
		}
	}

	sub_saharan_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_high_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_african_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_african_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	sub_saharan_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_african_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_african_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	sub_saharan_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sub_saharan_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_african_clothing_trigger = yes
			}
		}
	}

	sub_saharan_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mena_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_african_clothing_trigger = yes
				
				NOR = {
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        has_government = holy_order_government
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        is_landed = no
				        portrait_wear_armor_trigger = yes
				        exists = liege
				        liege = {
				            has_government = holy_order_government
				        }
				    }
				    AND = {
				    	OR = {
				        	religion = religion:marcher_religion
				        	religion = religion:agionism_religion
				        }
				        portrait_wear_armor_trigger = yes
				        OR = {
				            any_character_war = {
				                OR = {
				                    using_cb = undirected_great_holy_war
				                    using_cb = directed_great_holy_war
				                }
				                is_attacker = prev
				            }
				            any_liege_or_above = {
				                faith = prev.faith
				                any_character_war = {
				                    OR = {
				                        using_cb = undirected_great_holy_war
				                        using_cb = directed_great_holy_war
				                    }
				                    is_attacker = prev
				                }
				            }
				        }
				    }
				}
			}
		}
	}

	########Religious ##########
	##Orthodox ##
	religious_orthodox_high_clothes = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_orthodox_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    outfit_tags = { priest_outfit bishop_outfit }
	    weight = {
	        base = 0
	        modifier = {
				add = 130
				OR = {
					has_character_flag = need_priest_outfit
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				OR = {
					religion = religion:aversarinas_aautokrata_religion
					religion = religion:agionism_religion
				}
				NAND = {	
					is_ruler = yes
					religion = religion:aversarinas_aautokrata_religion
					primary_title = {
						exists = controlled_faith
					}
				}
			}
	    }
	}

	religious_orthodox_head_clothes = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_orthodox_head
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        #modifier = {
	        #   add = 1000
			#	is_ruler = yes
			#	primary_title = {
			#		exists = controlled_faith
			#	}
			#	OR = {
			#		religion = religion:aversarinas_aautokrata_religion
			#		religion = religion:agionism_religion
			#	}
	        #}
	    }
	}	

	##Catholic ##
	catholic_devoted = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = religious_catholic_devoted
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		outfit_tags = { monk_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				has_trait = devoted
				religion = religion:marcher_religion
			}
		}
	}

	catholic_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}

			accessory = {
				mode = add
				
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 }
			}
		}	
		weight = {
			base = 110
			modifier = {
				factor = 0
				NAND = {
					is_ruler = yes
					religion = religion:marcher_religion
					primary_title = {
						exists = controlled_faith
					}
				}
			}
		}
	}

	catholic_high = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_high
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}

			accessory = {
				mode = add
				
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 }
			}
		}	
	    weight = {
	        base = 120
	        modifier = {
	            factor = 0
	            OR = {
	            	AND = {
	                	is_theocratic_lessee = no
	                	NOT = { AND = { is_ruler = yes has_government = theocracy_government } }
	                	NOT = { faith.religious_head = root }
	                }
	                NOT = { religion = religion:marcher_religion }
	            }
	        }
	    }
	}

	popes = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			morph = {
				mode = add
				
				gene = gene_bs_ear_outward
				template = ear_outward_neg
				value = 1.0
			}
			accessory = {
				mode = add
				
				gene = headgear
				template = catholic_head
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}

			accessory = {
				mode = add
				
				gene = hairstyles
				template = no_hairstyles
				range = { 0 1 }
			}
		}	
		weight = {
			base = 140
			modifier = {
				factor = 0
				NAND = {
					is_adult = yes
					religion = religion:marcher_religion
					faith.religious_head = this
				}
			}
		}
	}

	##Jewish ##
	religious_jewish_head = {
		outfit_tags = { rank_headgear }
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add
				
				gene = headgear
				template = religious_jewish_head
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}

			#accessory = {
			#	mode = add
			#	
			#	gene = hairstyles
			#	template = no_hairstyles
			#	range = { 0 1 }
			#}
		}	
		weight = {
	        base = 0
	        modifier = {
	            add = 140
				is_ruler = yes
				faith.religion = religion:sheharddi_religion
				primary_title = {
					exists = controlled_faith
				}
	        }
	    }
	}

	##Muslim ##	
	religious_muslim_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_muslim_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        modifier = {
				add = 111
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				religion = religion:sarradonian_religion
			}
	    }
	}

	##Northern Pagan ##
	religious_northern_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_northern_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:apti_religion
					religion = religion:sjalvolki_religion
					religion = religion:gestanwoder_religion
					religion = religion:samojitian_religion
					religion = religion:gallieni_religion
					religion = religion:kardawai_religion
					religion = religion:salacad_religion
					religion = religion:gethian_religion
					religion = religion:kakarataki_religion
					religion = religion:allemani_religion
				}		
			}
	    }
	}

	##Steppe ##
	religious_steppe_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_steppe_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					faith = faith:aversarian_cumani
					religion = religion:cumani_religion
				}
			}
	    }
	}

	##Zoroastrian ##
	religious_zoroastrian_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_zoroastrian_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:amsari_religion
					religion = religion:agionism_religion
					religion = religion:marcher_religion
				}
			}
	    }
	}

	##Jewish ##
	religious_jewish_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_jewish_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        modifier = {
				add = 100
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:sheharddi_religion
					religion = religion:aversarinas_aautokrata_religion
				}
			}
	    }
	}

##African Pagan ##

	religious_african_high_headgear = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = headgear
	            template = religious_african_high
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
	    weight = {
	        base = 0
	        modifier = {
				add = 110
				OR = {
					is_theocratic_lessee = yes
					AND = { is_ruler = yes has_government = theocracy_government }
					has_council_position = councillor_court_chaplain
				}
				OR = {
					religion = religion:mogowai_religion
				}
			}
	    }
	}

	#religious_muslim_head_clothes = {
	#    dna_modifiers = {
	#        accessory = {
	#            mode = add
	#            gene = clothes
	#            template = religious_muslim_high_clothes
	#            range = { 0 1 }
	#        }
	#    }
	#    weight = {
	#        base = 0
	#        modifier = {
	#            add = 60
	#			is_ruler = yes
	#			primary_title = {
	#				exists = controlled_faith
	#				controlled_faith = faith:orthodox
	#			}
	#        }
	#    }
	#}

##FP1 NORSE ##

	fp1_norse_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							has_government = feudal_government
							has_government = clan_government
						}
					}
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
			modifier = {
				add = 41 #Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	has_government = republic_government
				 	AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_low_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					#has_dynasty = no
					AND = {
						has_government = republic_government
						primary_title.tier > 1
					}
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_nobility
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								has_government = republic_government
								primary_title.tier > 2
							}
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						portrait_fp1_norse_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									has_government = republic_government
									primary_title.tier > 2
								}
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_fp1_norse_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	fp1_norse_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_royalty
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 51 #Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_fp1_norse_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
							NOT = { has_government = republic_government }
							portrait_fp1_norse_clothing_trigger = yes
						}
					}
				}

			}
		}
	}

	fp1_norse_imperial = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_imperial
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 #pick over northern
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

	fp1_norse_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 #slightly higher than northern
				OR = { #This helmet is really fancy & gilded - it's nothing for commoners. We allow Dukes+ to use it sometimes, just because it suits them!
					AND = {
						has_council_position = councillor_marshal
						OR = {
							is_landed = no
							primary_title.tier >= tier_duchy
						}
					}
					AND = {
						is_commanding_army = yes
						AND = {
							exists = primary_title
							primary_title.tier >= tier_duchy
						}
					}
				}
				portrait_fp1_norse_clothing_trigger = yes
				
				NOR = {
					AND = {
						has_trait = peasant_leader
						OR = {
							is_ruler = no
							is_leading_faction_type = peasant_faction
							AND = {
								is_ruler = yes
								is_landed = no
								OR = {
									has_government = feudal_government
									has_government = clan_government
								}
							}
						}
					}
				}
			}
		}
	}
	
	fp1_norse_war_common = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = fp1_war_common
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = gh_headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}

##GH ##


	black_sun = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = black_sun_helmet_headgear
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 2000
				exists = character:clanlands_imperial_1
				this = character:clanlands_imperial_1
			}
		}
	}

	aversarian_magi_hood_0 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aversarian_magi_hood
				range = { 0 1 }
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 200
				portrait_byzantine_clothing_trigger = yes
				NOT = {
					has_trait = disfigured
				}
				OR = {
					has_education_magic_trigger = yes
					AND = {
						OR = {
							is_theocratic_lessee = yes
							has_government = theocracy_government
							has_council_position = councillor_court_chaplain
						}
						OR = {
							religion = religion:aversarinas_aautokrata_religion
						}
					}
				}
			}
		}
	}

	generic_magi_hood_0 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = generic_magi_hood
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 200
				portrait_byzantine_clothing_trigger = no
				has_education_magic_trigger = yes
				NOT = {
					has_trait = disfigured
				}
			}
		}
	}

	aversarian_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aversarian_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_byzantine_clothing_trigger = yes
				NOT = {
					has_trait = giant #tilted helmet clips giant head
				}
			}
		}
	}
	sarradonian_helmet_01 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = sarradonian_helmet_01
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_mena_clothing_trigger = yes
			}
		}
	}
	marcher_early_great_helm_01 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = marcher_early_great_helm_01
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101		
				portrait_wear_helmet_trigger = yes				
				portrait_marcher_clothing_trigger = yes
			}
		}
	}

	marcher_early_great_helm_01_painted = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = marcher_early_great_helm_01_painted
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101		
				portrait_wear_helmet_trigger = yes				
				portrait_marcher_clothing_trigger = yes
			}
		}
	}
	marcher_norman_helm_01 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = marcher_norman_helm_01
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101		
				portrait_wear_helmet_trigger = yes				
				portrait_marcher_clothing_trigger = yes
			}
		}
	}
	marcher_norman_helm_02 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = marcher_norman_helm_02
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101		
				portrait_wear_helmet_trigger = yes				
				portrait_marcher_clothing_trigger = yes
				
				NOR = {
					AND = {
						has_trait = peasant_leader
						OR = {
							is_ruler = no
							is_leading_faction_type = peasant_faction
							AND = {
								is_ruler = yes
								is_landed = no
								OR = {
									has_government = feudal_government
									has_government = clan_government
								}
							}
						}
					}
				}
			}
		}
	}
	agionist_helm_01 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = agionist_helm_01
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}
	damota_royal_headgear_01 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = damota_royal_headgear_01
				range = { 0 1 } #For the randomness to work correctly
			
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 40
				highest_held_title_tier >= tier_kingdom
				NOR = {
					AND = { is_ruler = yes has_government = mercenary_government  }
					has_government = republic_government
					AND = { is_ruler = yes has_government = theocracy_government }
				}
				portrait_african_clothing_trigger = yes
			}
		}
	}
	sarradon_noble_turban_01 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = sarradon_noble_turban_01
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 50
				highest_held_title_tier >= tier_duchy
				portrait_mena_clothing_trigger = yes
			}
		}
	}
	malcois_war  = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aversarian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_malcois_clothing_trigger  = yes
				AND = {
					NOR = {
					    AND = {
					    	OR = {
					        	religion = religion:marcher_religion
					        	religion = religion:agionism_religion
					        }
					        has_government = holy_order_government
					    }
					    AND = {
					    	OR = {
					        	religion = religion:marcher_religion
					        	religion = religion:agionism_religion
					        }
					        is_landed = no
					        portrait_wear_armor_trigger = yes
					        exists = liege
					        liege = {
					            has_government = holy_order_government
					        }
					    }
					    AND = {
					    	OR = {
					        	religion = religion:marcher_religion
					        	religion = religion:agionism_religion
					        }
					        portrait_wear_armor_trigger = yes
					        OR = {
					            any_character_war = {
					                OR = {
					                    using_cb = undirected_great_holy_war
					                    using_cb = directed_great_holy_war
					                }
					                is_attacker = prev
					            }
					            any_liege_or_above = {
					                faith = prev.faith
					                any_character_war = {
					                    OR = {
					                        using_cb = undirected_great_holy_war
					                        using_cb = directed_great_holy_war
					                    }
					                    is_attacker = prev
					                }
					            }
					        }
					    }
					}
				}
				NOT = {
					has_trait = giant #tilted helmet clips giant head
				}
			}
		}
	}
	opakhasia_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aversarian_war
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_opakhasia_clothing_trigger = yes
				
				AND = {
					NOR = {
					    AND = {
					    	OR = {
					        	religion = religion:marcher_religion
					        	religion = religion:agionism_religion
					        }
					        has_government = holy_order_government
					    }
					    AND = {
					    	OR = {
					        	religion = religion:marcher_religion
					        	religion = religion:agionism_religion
					        }
					        is_landed = no
					        portrait_wear_armor_trigger = yes
					        exists = liege
					        liege = {
					            has_government = holy_order_government
					        }
					    }
					    AND = {
					    	OR = {
					        	religion = religion:marcher_religion
					        	religion = religion:agionism_religion
					        }
					        portrait_wear_armor_trigger = yes
					        OR = {
					            any_character_war = {
					                OR = {
					                    using_cb = undirected_great_holy_war
					                    using_cb = directed_great_holy_war
					                }
					                is_attacker = prev
					            }
					            any_liege_or_above = {
					                faith = prev.faith
					                any_character_war = {
					                    OR = {
					                        using_cb = undirected_great_holy_war
					                        using_cb = directed_great_holy_war
					                    }
					                    is_attacker = prev
					                }
					            }
					        }
					    }
					}
				}
				NOT = {
					has_trait = giant #tilted helmet clips giant head
				}
			}
		}
	}

## FP1 NORSE ##

	fp1_norse_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 50
				highest_held_title_tier >= tier_duchy
				portrait_mena_clothing_trigger = yes
			}
		}
	}
	sarradon_high_noble_turban = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = sarradon_high_noble_turban
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 50
				highest_held_title_tier >= tier_kingdom
				portrait_mena_clothing_trigger = yes
			}
		}
	}
	sarradon_desert_common_headwear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = sarradon_desert_common_headwear
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 20
				highest_held_title_tier <= tier_county
				portrait_mena_clothing_trigger = yes
			}
			modifier = {
				add = 50
				has_government = tribal_government
				portrait_mena_clothing_trigger = yes
			}
		}
	}
	aironoi_mask_helmet = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aironoi_mask_helmet
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add				
				gene = beards
				template = no_beard
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_steppe_clothing_trigger = yes
			}
			modifier = {
				add = 1000
				faith = {
					has_doctrine_parameter = masked_adherents_active
				}
				portrait_wear_helmet_trigger = yes
			}
			modifier = {
				add = 200
				faith = {
					has_doctrine_parameter = masked_priests_active
				}
				portrait_wear_helmet_trigger = yes
				has_character_flag = need_priest_outfit
			}
		}
	}
	sarradon_common_headwear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = sarradon_common_headwear
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
	        base = 0
	        modifier = {
				add = 30
				highest_held_title_tier <= tier_county
				portrait_mena_clothing_trigger = yes
			}
		}
	}
	epe_spymaster_hood = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = epe_spymaster_hood
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_fp1_norse_clothing_trigger = yes
			}
		}
	}
	marcher_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = marcher_war
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
	
		weight = {
			base = 0
			modifier = {
				add = 101		
				portrait_wear_helmet_trigger = yes				
				portrait_marcher_clothing_trigger = yes
			}
		}
	}
	aversarian_islander_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aversarian_islander_headgear
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_islander_clothing_trigger = yes
			}
		}
	}
	aversarian_islander_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = gh_headgear
				template = aversarian_islander_crown
				range = { 0 1 } #For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								has_government = feudal_government
								has_government = clan_government
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes has_government = theocracy_government }
						}
						NOT = { AND = { is_ruler = yes has_government = mercenary_government  } } #Blocked for mercenaries
						NOT = { has_government = republic_government }
						portrait_islander_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						is_ruler = no
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_kingdom
								AND = { is_ruler = yes has_government = theocracy_government }
							}
							portrait_islander_clothing_trigger = yes
						}
					}
				}

			}
		}
	}
	aversarian_black_magi_hood = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = gh_headgear
	            template = aversarian_black_hood
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
		weight = {
	        base = 0
	        modifier = {
				add = 200
				portrait_byzantine_clothing_trigger = yes
				NOT = {
					has_trait = disfigured
				}
				OR = {
					has_education_magic_trigger = yes
					AND = {
						OR = {
							is_theocratic_lessee = yes
							has_government = theocracy_government
							has_council_position = councillor_court_chaplain
						}
						OR = {
							religion = religion:aversarinas_aautokrata_religion
						}
					}
				}
			}
		}
	}
	sarradon_magi_hood = {
	    dna_modifiers = {
	        accessory = {
	            mode = add
	            gene = gh_headgear
	            template = sarra_hood
	            range = { 0 1 }
	        }
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_2
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
	    }
		weight = {
	        base = 0
	        modifier = {
				add = 300
				portrait_mena_clothing_trigger = yes
				NOT = {
					has_trait = disfigured
				}
				has_education_magic_trigger = yes	
			}
		}
	}
}